{"ast":null,"code":"'use strict';\n\nconst Promise = require('../../promise');\n\nclass ResourceLock {\n  constructor(resource) {\n    this.resource = resource;\n    this.previous = Promise.resolve(resource);\n  }\n\n  unwrap() {\n    return this.resource;\n  }\n\n  lock() {\n    const lock = this.previous;\n    let resolve;\n    this.previous = new Promise(r => {\n      resolve = r;\n    });\n    return lock.disposer(resolve);\n  }\n\n}\n\nmodule.exports = ResourceLock;","map":null,"metadata":{},"sourceType":"script"}