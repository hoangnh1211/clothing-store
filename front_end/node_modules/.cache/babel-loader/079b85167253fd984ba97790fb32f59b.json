{"ast":null,"code":"\"use strict\";\n\nfunction isZero(array) {\n  for (let j = 0, len = array.length; j < len; j++) {\n    const byte = array[j];\n\n    if (byte !== 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getNextRemainder(array) {\n  let remainder = 0;\n\n  for (let i = array.length - 1; i >= 0; i--) {\n    const s = remainder * 256 + array[i];\n    array[i] = Math.floor(s / 10);\n    remainder = s % 10;\n  }\n\n  return remainder;\n}\n\nfunction invert(array) {\n  // Invert bits\n  const len = array.length;\n\n  for (let i = 0; i < len; i++) {\n    array[i] = array[i] ^ 0xFF;\n  }\n\n  for (let i = 0; i < len; i++) {\n    array[i] = array[i] + 1;\n\n    if (array[i] > 255) {\n      array[i] = 0;\n    } else {\n      break;\n    }\n  }\n}\n\nmodule.exports.convertLEBytesToString = convertLEBytesToString;\n\nfunction convertLEBytesToString(buffer) {\n  const array = Array.prototype.slice.call(buffer, 0, buffer.length);\n\n  if (isZero(array)) {\n    return '0';\n  } else {\n    let sign;\n\n    if (array[array.length - 1] & 0x80) {\n      sign = '-';\n      invert(array);\n    } else {\n      sign = '';\n    }\n\n    let result = '';\n\n    while (!isZero(array)) {\n      const t = getNextRemainder(array);\n      result = t + result;\n    }\n\n    return sign + result;\n  }\n}\n\nmodule.exports.numberToInt64LE = numberToInt64LE;\n\nfunction numberToInt64LE(num) {\n  // adapted from https://github.com/broofa/node-int64\n  const negate = num < 0;\n  let hi = Math.abs(num);\n  let lo = hi % 0x100000000;\n  hi = hi / 0x100000000 | 0;\n  const buf = Buffer.alloc(8, 0);\n\n  for (let i = 0; i <= 7; i++) {\n    buf[i] = lo & 0xff;\n    lo = i === 3 ? hi : lo >>> 8;\n  }\n\n  if (negate) {\n    let carry = 1;\n\n    for (let i = 0; i <= 7; i++) {\n      const v = (buf[i] ^ 0xff) + carry;\n      buf[i] = v & 0xff;\n      carry = v >> 8;\n    }\n  }\n\n  return buf;\n}","map":null,"metadata":{},"sourceType":"script"}