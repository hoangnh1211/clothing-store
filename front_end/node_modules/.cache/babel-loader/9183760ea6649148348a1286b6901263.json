{"ast":null,"code":"\"use strict\";\n\nconst FEATURE_ID = {\n  SESSIONRECOVERY: 0x01,\n  FEDAUTH: 0x02,\n  COLUMNENCRYPTION: 0x04,\n  GLOBALTRANSACTIONS: 0x05,\n  AZURESQLSUPPORT: 0x08,\n  TERMINATOR: 0xFF\n};\n\nmodule.exports = function featureExtAckParser(parser, colMetadata, options, callback) {\n  const token = {\n    'name': 'FEATUREEXTACK',\n    'event': 'featureExtAck',\n    'fedAuth': undefined\n  };\n\n  function next(done) {\n    parser.readUInt8(featureId => {\n      if (featureId === FEATURE_ID.TERMINATOR) {\n        return done();\n      }\n\n      parser.readUInt32LE(featureAckDataLen => {\n        parser.readBuffer(featureAckDataLen, featureData => {\n          if (featureId === FEATURE_ID.FEDAUTH) {\n            token.fedAuth = featureData;\n          }\n\n          next(done);\n        });\n      });\n    });\n  }\n\n  next(() => {\n    callback(token);\n  });\n};","map":null,"metadata":{},"sourceType":"script"}